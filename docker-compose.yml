version: '3.9'

services:
  nginx:
    image: nginx:alpine
    ports:
      - '80:80'
      - '443:443'
    volumes:
      - './nginx.conf:/etc/nginx/conf.d/default.conf'
	  - './sp7-stats:/var/www/:ro'
      - './fullchain.pem:/etc/letsencrypt/live/sp7-stats/fullchain.pem:ro'
      - './privkey.pem:/etc/letsencrypt/live/sp7-stats/privkey.pem:ro'
    networks:
      - nginx
    depends_on:
      - php

  php:
    build:
      context: ./
      target: back_end
      environment:
        # CHANGE THIS:
		# Whether to print error messages and warnings. Can be FALSE or TRUE
        DEVELOPMENT: 'FALSE'
        # CHANGE THIS:
        # Address the website would be served on
        LINK: 'http://localhost/'
	volumes:
	    # CHANGE THIS:
        # Location to the place where all of your access.log files are located.
	    # Make sure the web server has read permissions to all the files in this folder.
	  - './access-logs/:/home/specify/access-logs/'
	  - './sp7-stats:/home/specify/sp7-stats/'
	  - 'working-dir:/home/specify/working-dir/'
    networks:
      - nginx

networks:
  nginx:

volumes:
  database:
  working-dir: